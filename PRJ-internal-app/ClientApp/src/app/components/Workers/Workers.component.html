

<div class="w-100 container border rounded shadow mt-5 bg-white px-4">



  <div class="mainContent d-flex flex-wrap justify-content-evenly align-content-center mt-4">

    <section class="lookupdiv d-flex justify-content-start align-items-start flex-wrap w-100 my-2">
      <div class="breadcrumb-w1 mb-0" class="{{lang == 'ar' ? 'lang' : ''}}">
        <nav style="--bs-breadcrumb-divider: url(&#34;data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='8' height='8'%3E%3Cpath d='M2.5 0L1 1.5 3.5 4 1 6.5 2.5 8l4-4-4-4z' fill='currentColor'/%3E%3C/svg%3E&#34;);" aria-label="breadcrumb">
          <ol class="breadcrumb">
            <li type="button" class="breadcrumb-item" (click)="Breadcrumb('')" style="color: #ca9f45">{{ "General.Home" | translate }}</li>
            <li type="button" class="breadcrumb-item" (click)="Breadcrumb('system-settings')" style="color: #ca9f45">{{ "Settings" | translate }}</li>
            <li class="breadcrumb-item active" aria-current="page">{{ "Workers.PageTitle" | translate }}</li>
          </ol>
        </nav>
        <button type="button" class="btn btn-gold btn-sm mx-1" (click)="Back()"><fa-icon [icon]="faArrowAltCircleLeft"> </fa-icon> {{ "General.Back" | translate }} </button>

      </div>
      <h4 class="text-left">
        {{ "Workers.PageTitle" | translate }}
      </h4>

      <div class="row w-100 mt-3 lookupsDataEntry">

        <div class="lookupsfields">
          <div class="w-100">

            <form [formGroup]="SubmitForm" (ngSubmit)="save()">

              <div class="row p-3 w-100 py-2">

                <div class="px-1 mb-3 col-lg-3 col-md-6 col-sm-12 col-xs-12">
                  <label for="ClassName" class="mx-1">{{ "Workers.WorkerNameAr" | translate }} <span class="text-danger">*</span></label>
                  <input (keypress)="OnlyArabic($event , 200)" type="text" class="form-control" [(ngModel)]="objData.WorkerNameAr" formControlName="WorkerNameAr" id="WorkerNameAr" placeholder="{{ 'mandatory' | translate }}" required autocomplete="off" />
                  <div *ngIf="SubmitForm.controls['WorkerNameAr'].errors && SubmitForm.controls['WorkerNameAr'].touched" id="error" class="form-text d-block text-danger">
                    ({{ "Workers.ValidWorkerNameAr" | translate }})
                  </div>
                </div>

                <div class="px-1 mb-3 col-lg-3 col-md-6 col-sm-12 col-xs-12">
                  <label for="WorkerNameEn" class="mx-1">{{ "Workers.WorkerNameEn" | translate }} <span class="text-danger">*</span></label>
                  <input (keypress)="OnlyEnglish($event , 200)" type="text" class="form-control" [(ngModel)]="objData.WorkerNameEn" formControlName="WorkerNameEn" id="WorkerNameEn" required placeholder="{{ 'mandatory' | translate }}" autocomplete="off" />
                  <div *ngIf="SubmitForm.controls['WorkerNameEn'].errors && SubmitForm.controls['WorkerNameEn'].touched" class="form-text d-block text-danger">
                    ({{ "Workers.ValidWorkerNameEn" | translate }})
                  </div>
                </div> 

                <div class="px-1 mb-3 col-lg-3 col-md-6 col-sm-12 col-xs-12">
                  <label for="BirthDate" class="mx-1">{{ "Workers.BirthDate" | translate }} <span class="text-danger">*</span></label>
                  <input type="date" class="form-control" formControlName="BirthDate" [(ngModel)]="objData.BirthDate" id="BirthDate" required autocomplete="off" />
                  
                  <div *ngIf="SubmitForm.controls['BirthDate'].errors && SubmitForm.controls['BirthDate'].touched" class="form-text d-block text-danger">
                    ({{ "Workers.ValidBirthDate" | translate }})
                  </div>
                </div>

                <div class="px-1 mb-3 col-lg-3 col-md-6 col-sm-12 col-xs-12">
                  <label for="ExtraData1" class="mx-1">{{ "Workers.JobPosition" | translate }} </label>
                  <input type="text" class="form-control" placeholder="{{ 'mandatory' | translate }}" [(ngModel)]="objData.JobPosition" formControlName="JobPosition" id="JobPosition" autocomplete="off" />
                  <div *ngIf="SubmitForm.controls['JobPosition'].errors && SubmitForm.controls['JobPosition'].touched" class="form-text d-block text-danger">
                    ({{ "Workers.ValidJobPosition" | translate }})
                  </div>
                </div>

                <div class="px-1 mb-3 col-lg-3 col-md-6 col-sm-12 col-xs-12">
                  <label for="ExtraData2" class="mx-1">{{ "Workers.NationalityId" | translate }} </label>
                  <input (keypress)="isNumberKey($event)" type="text" class="form-control" [(ngModel)]="objData.NationalityId" formControlName="NationalityId" id="NationalityId" placeholder="{{ 'mandatory' | translate }}" autocomplete="off" />
                  <div *ngIf="SubmitForm.controls['NationalityId'].errors && SubmitForm.controls['NationalityId'].touched" class="form-text d-block text-danger">
                    ({{ "Workers.ValidNationalityId" | translate }})
                  </div>
                </div>
                <div class="px-1 mb-3 col-lg-3 col-md-6 col-sm-12 col-xs-12">
                  <label for="Status" class="mx-1">{{ "Workers.nationality" | translate }}  </label>
                  <select class="form-control" formControlName="Nationality"  [(ngModel)]="objData.Nationality" autocomplete="off">
                    <option *ngFor="let National of nationalitys" [value]="National.id">
                      {{ lang == "en" ? National.countryNameEn : National.countryNameAr }}
                    </option>
                  </select>
                  <div *ngIf="SubmitForm.controls['Status'].errors && SubmitForm.controls['Status'].touched" class="form-text d-block text-danger">
                    ({{ "Workers.nationality" | translate }})
                  </div>
                </div>
                <div class="px-1 mb-3 col-lg-3 col-md-6 col-sm-12 col-xs-12">
                  <label for="Status" class="mx-1">{{ "Workers.Status" | translate }} </label>
                  <select class="form-control" [(ngModel)]="objData.Status" formControlName="Status" id="Status" autocomplete="off">
                    <option *ngFor="let itm of lookupsList" [value]="itm.id">
                      {{ lang == "en" ? itm.displayNameEn : itm.displayNameAr }}
                    </option>
                  </select>
                  <div *ngIf="SubmitForm.controls['Status'].errors && SubmitForm.controls['Status'].touched" class="form-text d-block text-danger">
                    ({{ "Workers.ValidStatus" | translate }})
                  </div>
                </div>

                <div class="px-1 mb-3 col-lg-3 col-md-6 col-sm-12 col-xs-12">
                  <label for="PassportNo" class="mx-1">{{ "Workers.PassportNo" | translate }} </label>
                  <input (keypress)="isNumberKey($event)" type="text" class="form-control" [(ngModel)]="objData.PassportNo" formControlName="PassportNo" id="PassportNo" placeholder="{{ 'mandatory' | translate }}" autocomplete="off" />
                  <div *ngIf="SubmitForm.controls['PassportNo'].errors && SubmitForm.controls['PassportNo'].touched" class="form-text d-block text-danger">
                    ({{ "Workers.ValidPassportNo" | translate }})
                  </div>
                </div>

                <div class="px-1 mb-3 col-lg-3 col-md-6 col-sm-12 col-xs-12">
                  <label for="Facility" class="mx-1">{{ "Workers.Facility" | translate }} </label>
                  <select class="form-control" [(ngModel)]="objData.Facility" formControlName="Facility" id="Facility" autocomplete="off">
                    <option *ngFor="let fac of Facilities" [value]="fac.id">
                      {{ lang == "en" ? fac.facilityNameEn : fac.facilityNameAr }} ** {{fac.id}}
                    </option>
                  </select>
                  <div *ngIf="SubmitForm.controls['Facility'].errors && SubmitForm.controls['Facility'].touched" class="form-text d-block text-danger">
                    ({{ "Workers.ValidFacility" | translate }})
                  </div>
                </div>

                <div class="d-flex justify-content-end align-items-center flex-wrap w-100">
                  <span class="btn btn-secondary mx-2" (click)="reset()" style="padding-left: 50px; padding-right: 50px;" id="reset-all">
                    {{ "ResetFormData" | translate }}
                  </span>
                  <button class="btn btn-gold mx-2" style="padding-left: 100px;padding-right:100px;" id="submit-all">
                    {{ "Save" | translate }}
                  </button>
                </div>
              </div>

            </form>


          </div>
        </div>

      </div>


    </section>
    <hr class="my-4 w-100">
    <div class="datatablediv w-100">
      <div class="pb-3">
        <button type="button" (click)="ExportExel()" class="btn btn-gold btn-sm mx-1">{{ "General.ExportExcel" | translate }}  </button>
        <button type="button" (click)="Print()" class="btn btn-gold btn-sm mx-1">{{ "General.Print" | translate }}  </button>
        <button type="button" (click)="Copy()" class="btn btn-gold btn-sm mx-1">{{ "General.Copy" | translate }} </button>
      </div>

      <table datatable [dtOptions]="dtOptions" id="WorkersDataTable" class="table datatable table-responsive table-striped table-bordered row-border table-hover table-sm w-100 overflow-auto">
        <thead>
          <tr>
            <th class="select-filter">
              {{ "Workers.WorkerNameAr" | translate }}
            </th>
            <th class="select-filter">
              {{ "Workers.WorkerNameEn" | translate }}
            </th>
            <th class="select-filter">
              {{ "Workers.JobPosition" | translate }}
            </th>
            <th class="select-filter">
              {{ "Workers.Facility" | translate }}
            </th>
            <th>{{ "Action" | translate }}</th>
          </tr>
        </thead>
        <tbody *ngIf="dataList?.length != 0">
          <tr *ngFor="let mem of dataList;let i = index">
            <td>{{mem.workerNameAr}}</td>
            <td>{{mem.workerNameEn}}</td>
            <td>{{mem.jobPosition}}</td>
            <td>{{lang == "en" ? mem.facilityProfile.facilityNameEn : mem.facilityProfile.facilityNameAr }}</td>
            <td>
              <button class="edit btn btn-gold btn-sm mx-1" (click)="Details(mem)"><fa-icon [icon]="faPen"> </fa-icon> </button>
              <button class="delete btn btn-secondary btn-sm mx-1" (click)="Delete(mem)"><fa-icon [icon]="faTrash"> </fa-icon></button>
            </td>
          </tr>
        </tbody>
        <tbody *ngIf="dataList?.length == 0">
          <tr>
            <td colspan="4" class="no-data-available">
              {{ "General.NoDataFound" | translate }}
            </td>
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <th>
              <input class="search-input"
                     name="workerNameAr"
                     id="workerNameAr"
                     type="text"
                     placeholder="{{ 'Workers.WorkerNameAr' | translate }}"
                     style="width: 100%" />
            </th>
            <th>
              <input class="search-input"
                     name="workerNameEn"
                     id="workerNameEn"
                     type="text"
                     placeholder="{{ 'Workers.WorkerNameEn' | translate }}"
                     style="width: 100%" />
            </th>
            <th>
              <input class="search-input"
                     name="jobPosition"
                     id="jobPosition"
                     type="text"
                     placeholder="{{ 'Workers.JobPosition' | translate }}"
                     style="width: 100%" />
            </th>
            <th>
              <input class="search-input"
                     name="facilityProfile"
                     id="ss"
                     type="text"
                     placeholder="{{ 'Workers.Facility' | translate }}"
                     style="width: 100%" />
            </th>
            <th>

            </th>
          </tr>
        </tfoot>
      </table>


    </div>

  </div>

</div>
